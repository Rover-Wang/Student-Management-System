{% extends 'base.html' %}

{% block title %}å­¦ç”Ÿä¸­å¿ƒ - æŠ€èƒ½è¿½è¸ª{% endblock %}

{% block content_title %}
    æˆ‘çš„æŠ€èƒ½
{% endblock %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/student_style.css') }}">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
{% endblock %}

{% block content %}
<div class="container mt-4 mb-5">
    <h2 class="fw-bolder text-dark mb-4">ğŸ“ˆ æˆ‘çš„æŠ€èƒ½è¿½è¸ª</h2>
    <p class="text-secondary">åœ¨è¿™é‡Œè®°å½•å’Œç®¡ç†æ‚¨çš„å„é¡¹æŠ€èƒ½æ°´å¹³ã€‚</p>

    <div class="d-flex justify-content-start mb-4">
        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addSkillModal">
            <i class="bi bi-plus-circle-fill me-2"></i>æ·»åŠ æ–°æŠ€èƒ½
        </button>
    </div>

    <div class="row g-4">
        {% if skills %}
            {% for skill in skills %}
            <div class="col-md-6 col-lg-4">
                <div class="card h-100 shadow-sm skill-card">
                    <div class="card-header bg-info text-white py-3">
                        <h5 class="mb-0 fw-bold">{{ skill.name }}</h5>
                    </div>
                    <div class="card-body">
                        <p class="card-text text-muted small mb-3">å½“å‰ç­‰çº§: <span class="fw-bold text-dark">{{ get_level_text(skill.current_level) }}</span></p>
                        <p class="card-text text-muted small mb-3">ç›®æ ‡ç­‰çº§: <span class="fw-bold text-primary">{{ get_level_text(skill.target_level) }}</span></p>
                        
                        <div class="progress" style="height: 10px;">
                            <div class="progress-bar bg-success" role="progressbar" 
                                 style="width: {{ (skill.current_level / 5) * 100 }}%;" 
                                 aria-valuenow="{{ skill.current_level }}" aria-valuemin="1" aria-valuemax="5">
                            </div>
                        </div>
                        <p class="text-end small mt-1 text-muted">{{ skill.current_level }} / 5</p>
                    </div>
                    <div class="card-footer d-flex justify-content-end bg-light border-0">
                        <a href="{{ url_for('student.edit_skill', skill_id=skill.id) }}" class="btn btn-sm btn-outline-info me-2">
                            <i class="bi bi-pencil"></i> ç¼–è¾‘
                        </a>
                        <a href="{{ url_for('student.delete_skill', skill_id=skill.id) }}" class="btn btn-sm btn-outline-danger" 
                           onclick="return confirm('ç¡®å®šè¦åˆ é™¤æŠ€èƒ½ã€{{ skill.name }}ã€å—ï¼Ÿ');">
                            <i class="bi bi-trash"></i> åˆ é™¤
                        </a>
                    </div>
                </div>
            </div>
            {% endfor %}
        {% else %}
            <div class="col-12">
                <div class="alert alert-warning text-center py-5" role="alert">
                    <i class="bi bi-book-half display-4 mb-3"></i>
                    <h4 class="alert-heading">æš‚æ— æŠ€èƒ½æ•°æ®</h4>
                    <p>æš‚æ— æŠ€èƒ½æ•°æ®ï¼Œç‚¹å‡»â€œæ·»åŠ æ–°æŠ€èƒ½â€å¼€å§‹è¿½è¸ªï¼</p>
                    <hr>
                    <button type="button" class="btn btn-warning" data-bs-toggle="modal" data-bs-target="#addSkillModal">
                        <i class="bi bi-plus-circle-fill me-2"></i>æ·»åŠ ç¬¬ä¸€ä¸ªæŠ€èƒ½
                    </button>
                </div>
            </div>
        {% endif %}
    </div>
</div>

<div class="modal fade" id="addSkillModal" tabindex="-1" aria-labelledby="addSkillModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title" id="addSkillModalLabel">åˆ›å»ºæ–°çš„æŠ€èƒ½</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <form action="{{ url_for('student.add_skill') }}" method="POST">
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="skillName" class="form-label">æŠ€èƒ½åç§°</label>
                        <input type="text" class="form-control" id="skillName" name="skill_name" required>
                    </div>
                    <div class="mb-3">
                        <label for="currentLevel" class="form-label">å½“å‰ç­‰çº§ (1-5)</label>
                        <input type="number" class="form-control" id="currentLevel" name="current_level" min="1" max="5" value="1" required>
                        <div class="form-text">1:å…¥é—¨, 5:ä¸“å®¶</div>
                    </div>
                    <div class="mb-3">
                        <label for="targetLevel" class="form-label">ç›®æ ‡ç­‰çº§ (1-5)</label>
                        <input type="number" class="form-control" id="targetLevel" name="target_level" min="1" max="5" value="3" required>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">å–æ¶ˆ</button>
                    <button type="submit" class="btn btn-primary">ä¿å­˜æŠ€èƒ½</button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
{% endblock %}