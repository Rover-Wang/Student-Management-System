{% extends 'base.html' %}
{% block title %}ç¼–è¾‘æŠ€èƒ½ - {{ skill.name }}{% endblock %}

{% block content_title %}ç¼–è¾‘æŠ€èƒ½{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="card shadow-sm mx-auto" style="max-width: 600px;">
        <div class="card-header bg-success text-white">
            <h5 class="mb-0">ç¼–è¾‘æŠ€èƒ½ï¼š{{ skill.name }}</h5>
        </div>
        <div class="card-body p-4">
            <form action="{{ url_for('skill.edit_skill', id=skill.id) }}" 
                  method="POST" class="needs-validation" novalidate>
                
                <div class="mb-3">
                    <label for="skillNameInput" class="form-label fw-medium">æŠ€èƒ½åç§°</label>
                    <input type="text" 
                           name="name" 
                           id="skillNameInput"
                           class="form-control" 
                           value="{{ skill.name }}" 
                           required 
                           placeholder="ä¾‹å¦‚ï¼šPythonå¼€å‘ã€Javaç¼–ç¨‹">
                    <div class="invalid-feedback">è¯·å¡«å†™æœ‰æ•ˆçš„æŠ€èƒ½åç§°</div>
                </div>

                <div class="row g-3 mb-3">
                    <div class="col-md-6">
                        <label for="currentLevelSelect" class="form-label fw-medium">å½“å‰ç­‰çº§</label>
                        <select name="current_level" 
                                id="currentLevelSelect"
                                class="form-select" 
                                required>
                            <option value="">è¯·é€‰æ‹©ç­‰çº§</option>
                            {% for level in range(1, 6) %}
                                <option value="{{ level }}" 
                                        {% if skill.current_level == level %}selected{% endif %}>
                                    {{ level }}çº§ï¼ˆ{{ ['å…¥é—¨','åŸºç¡€','ç†Ÿç»ƒ','ç²¾é€š','ä¸“å®¶'][level-1] }}ï¼‰
                                </option>
                            {% endfor %}
                        </select>
                        <div class="invalid-feedback">è¯·é€‰æ‹©å½“å‰ç­‰çº§ï¼ˆ1-5çº§ï¼‰</div>
                    </div>

                    <div class="col-md-6">
                        <label for="targetLevelSelect" class="form-label fw-medium">ç›®æ ‡ç­‰çº§</label>
                        <select name="target_level" 
                                id="targetLevelSelect"
                                class="form-select" 
                                required>
                            <option value="">è¯·é€‰æ‹©ç­‰çº§</option>
                            {% for level in range(1, 6) %}
                                <option value="{{ level }}" 
                                        {% if skill.target_level == level %}selected{% endif %}>
                                    {{ level }}çº§ï¼ˆ{{ ['å…¥é—¨','åŸºç¡€','ç†Ÿç»ƒ','ç²¾é€š','ä¸“å®¶'][level-1] }}ï¼‰
                                </option>
                            {% endfor %}
                        </select>
                        <div class="invalid-feedback">è¯·é€‰æ‹©ç›®æ ‡ç­‰çº§ï¼ˆ1-5çº§ï¼‰</div>
                    </div>
                </div>

                <div class="d-flex gap-2 mt-4">
                    <button type="submit" class="btn btn-success flex-grow-1">
                        <i class="bi bi-check-circle me-2"></i>ä¿å­˜ä¿®æ”¹
                    </button>
                    <a href="{{ url_for('skill.student_skill') }}" 
                       class="btn btn-secondary flex-grow-1">
                        <i class="bi bi-arrow-left me-2"></i>å–æ¶ˆ
                    </a>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
(() => {
    'use strict';
    const form = document.querySelector('.needs-validation');
    form.addEventListener('submit', e => {
        if (!form.checkValidity()) {
            e.preventDefault();
            e.stopPropagation();
            const invalidField = form.querySelector(':invalid');
            if (invalidField) {
                invalidField.focus();
                invalidField.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        }
        form.classList.add('was-validated');
    }, false);
    
    // è¾“å…¥æ—¶ç§»é™¤éªŒè¯çŠ¶æ€
    const inputs = form.querySelectorAll('input, select');
    inputs.forEach(input => {
        input.addEventListener('input', () => {
            if (form.classList.contains('was-validated')) {
                form.classList.remove('was-validated');
            }
        });
    });
})();
</script>
{% endblock %}

### ğŸ’¡ æ‚¨çš„ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1.  **æ›¿æ¢æ–‡ä»¶ï¼š** ç”¨ä¸Šé¢æä¾›çš„ä»£ç æ›¿æ¢æ‚¨å½“å‰çš„ `templates/student/edit_skill.html`ã€‚
2.  **æ›´æ–° `base.html`ï¼š** ç¡®ä¿æ‚¨å·²ç»æ ¹æ®æˆ‘ä¸Šä¸€ä¸ªå›å¤çš„å»ºè®®ï¼Œå°† `base.html` ä¸­å­¦ç”Ÿä¾§è¾¹æ çš„â€œæŠ€èƒ½è¿½è¸ªâ€èœå•çš„é«˜äº®å’Œé“¾æ¥**å…¨éƒ¨æŒ‡å‘ `skill` è“å›¾** (`skill.student_skill`)ã€‚
3.  **é‡å¯å¹¶æµ‹è¯•ï¼š** é‡å¯ Flask æœåŠ¡å™¨å¹¶è¿›è¡Œ**å¼ºåˆ¶åˆ·æ–°**ï¼ˆ`Ctrl + Shift + R`ï¼‰ã€‚

è¿™ä¸ªæ–°ç‰ˆæœ¬ç§»é™¤äº†æ‰€æœ‰å¯èƒ½äº§ç”Ÿå†²çªçš„è‡ªå®šä¹‰ CSSï¼Œå¼ºåˆ¶ä½¿ç”¨ Bootstrap åŸºç¡€ç±»ï¼ˆ`bg-success`ï¼Œ`card`ï¼Œ`shadow-sm`ï¼‰ï¼Œè¿™åº”è¯¥èƒ½ç¡®ä¿é¡µé¢åœ¨ Bootstrap åŠ è½½æˆåŠŸçš„æƒ…å†µä¸‹æ˜¾ç¤ºæ­£å¸¸ä¸”ç¾è§‚ã€‚